---
common:
  # before_commands will be executed in each pane before doing anything else. Use this e.g. for
  #   - sourcing an environment
  #   - ssh-ing to another machine
  before_commands:
    - . $MK0_WS/install/setup.bash

  # The default window will be the one displayed when first connecting to the tmux session
  default_window: turtlesim
windows:
  - name: sim Core
    commands:
      - ros2 run turtlesim turtlesim_node

# LOCOMOTION (Should these just be launch files? should it all be a launch file?)
  - name: JoyLaunch
    commands:
      - ros2 launch teleop_twist_joy teleop-launch.py joy_config:='xbox' joy_vel:=/input/joystick_raw
  # JoyVelSmoother
  - name: velocity_smoother_joy
    commands:
      - ros2 run velocity_smoother velocity_smoother --ros-args -r /velocity_smoother/input:=/input/joystick_raw -r /velocity_smoother/smoothed:=/input/joystick

  - name: Kobuki Keyop
    commands:
      - echo "Launching Kobuki Key op"
      - ros2 run kobuki_keyop kobuki_keyop_node --ros-args -r /cmd_vel:=/input/keyop_raw
  # keyop velocity smoother
  - name: velocity_smoother_keyop
    commands:
      - ros2 run velocity_smoother velocity_smoother --ros-args -r /velocity_smoother/input:=/input/keyop_raw -r /velocity_smoother/smoothed:=/input/keyop
########### Velocity output nodes ###########
  - name: Kobuki_SAFE_CTRL
    commands:
      - ros2 run kobuki_safety_controller kobuki_safety_controller_node --ros-args -r /cmd_vel:=/input/safety_controller

  # All twist inputs go through vel mux
  - name: cmd_vel_mux
    commands:
      - ros2 run cmd_vel_mux cmd_vel_mux_node --ros-args --params-file $(ros2 pkg prefix mk0_bringup)/share/mk0_bringup/config/cmd_vel_mux_params.yaml -r /cmd_vel:=turtle1/cmd_vel

# Might need to individually smooth things before they go into cmd_vel_mux.

# FEEDBACK
# Sound Server
# Light Server